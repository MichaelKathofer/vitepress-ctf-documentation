import{_ as t,c as s,o as a,a as n,b as e}from"./app.6aa4d79c.js";var o="/PluginsOverview_banner.png";const Q='{"title":"Plugins","description":"","frontmatter":{},"headers":[{"level":2,"title":"1) use an already existing plugin","slug":"_1-use-an-already-existing-plugin"},{"level":3,"title":"Multiple choice plugin","slug":"multiple-choice-plugin"},{"level":3,"title":"Timer plugin","slug":"timer-plugin"},{"level":2,"title":"2) developing a new plugin","slug":"_2-developing-a-new-plugin"},{"level":3,"title":"Structure","slug":"structure"},{"level":3,"title":"Development","slug":"development"}],"relativePath":"plugins.md","lastUpdated":1642064986457}',i={},l=n("p",null,[n("img",{src:o,alt:"An image"})],-1),u=n("h1",{id:"plugins",tabindex:"-1"},[e("Plugins "),n("a",{class:"header-anchor",href:"#plugins","aria-hidden":"true"},"#")],-1),p=n("p",null,"Plugins can extend the feature set of the basic CTFd framework. If functions that you plan on using aren't built-in, there are two options:",-1),c=n("h2",{id:"_1-use-an-already-existing-plugin",tabindex:"-1"},[e("1) use an already existing plugin "),n("a",{class:"header-anchor",href:"#_1-use-an-already-existing-plugin","aria-hidden":"true"},"#")],-1),r=n("p",null,[e("There are two main places to look for Plugins. The official CTFd page sells a few ones and then there is the option to look into the GitHub community section. There are a few plugins openly available on GitHub, and some are only available as paid versions. Here is an overview of all the plugins that are available for CTFd in the community repo: "),n("a",{href:"https://github.com/CTFd/plugins",target:"_blank",rel:"noopener noreferrer"},"https://github.com/CTFd/plugins")],-1),d=n("p",null,"The key is to widely cover the needed Todos with plugins that already exist before we start covering the rest with custom plugins. The first aspect that is already covered within a community plugin is a multiple question plugin",-1),h=n("h3",{id:"multiple-choice-plugin",tabindex:"-1"},[e("Multiple choice plugin "),n("a",{class:"header-anchor",href:"#multiple-choice-plugin","aria-hidden":"true"},"#")],-1),g=n("p",null,[e("credits: "),n("a",{href:"https://github.com/tamuctf/CTFd-multi-question-plugin",target:"_blank",rel:"noopener noreferrer"},"https://github.com/tamuctf/CTFd-multi-question-plugin")],-1),k=n("p",null,"The installation process should be simple: Just clone the repository into the /plugins folder",-1),_=n("div",{class:"danger custom-block"},[n("p",{class:"custom-block-title"},"Error"),n("p",null,[e('File "/opt/CTFd/CTFd/plugins/CTFd-multi-question-plugin/'),n("strong",null,"init"),e(`.py", line 1 from CTFd.plugins import register_plugin_assets_directory, challenges, keys ImportError: cannot import name 'keys' from 'CTFd.plugins' "(/opt/CTFd/CTFd/plugins/`),n("strong",null,"init"),e('.py)"')])],-1),f=n("ul",null,[n("li",null,[n("p",null,"Tried to update the plugin to fix compatibility issues with the current CTFd version.")]),n("li",null,[n("p",null,"Error displays that it can't import 'keys'. It shows, that newer versions use 'get_flag_class' instead of 'get_key_class'. Couldn't fix the issue after hours.")])],-1),m=n("h4",{id:"proposed-solution",tabindex:"-1"},[e("Proposed solution "),n("a",{class:"header-anchor",href:"#proposed-solution","aria-hidden":"true"},"#")],-1),b=n("p",null,"Due to an update of CTFd to a newer version, variables and structure changed. Therefore, the plugin is no longer working at the newest version of CTFd and all try to quick-fix the plugin failed.",-1),v=n("h3",{id:"timer-plugin",tabindex:"-1"},[e("Timer plugin "),n("a",{class:"header-anchor",href:"#timer-plugin","aria-hidden":"true"},"#")],-1),y=n("p",null,[e("credits: "),n("a",{href:"https://github.com/alokmenghrajani/ctfd-timed-releases-plugin/tree/b5577c1a2e6b801d394d23dda808abbd68b46a7e",target:"_blank",rel:"noopener noreferrer"},"https://github.com/alokmenghrajani/ctfd-timed-releases-plugin/tree/b5577c1a2e6b801d394d23dda808abbd68b46a7e")],-1),w=n("p",null,"This is the closest to a time-limited question plugin there is after research. This leads to developing an own solution due to the additional error, this plugin throws due to compatibility issues. After researching more this was an occurring error and left us with the only option to develop our solutions for the requested features",-1),T=n("h2",{id:"_2-developing-a-new-plugin",tabindex:"-1"},[e("2) developing a new plugin "),n("a",{class:"header-anchor",href:"#_2-developing-a-new-plugin","aria-hidden":"true"},"#")],-1),C=n("p",null,"This section covers the documentation on How-to develop a plugin for CTFd. Due to the lack of in-depth documentation, this process was quite a challenge. In this section, I will try to cover how to start programming a plugin",-1),x=n("h3",{id:"structure",tabindex:"-1"},[e("Structure "),n("a",{class:"header-anchor",href:"#structure","aria-hidden":"true"},"#")],-1),F=n("div",{class:"language-js"},[n("pre",null,[n("code",null,[e(`CTFd
\u2514\u2500\u2500 plugins
   \u2514\u2500\u2500 CTFd`),n("span",{class:"token operator"},"-"),e(`plugin
       \u251C\u2500\u2500 `),n("span",{class:"token constant"},"README"),n("span",{class:"token punctuation"},"."),e("md          Classic ReadMe files "),n("span",{class:"token keyword"},"with"),e(` basic setup instructions
       \u251C\u2500\u2500 __init__`),n("span",{class:"token punctuation"},"."),e(`py        Main code
       \u251C\u2500\u2500 requirements`),n("span",{class:"token punctuation"},"."),e(`txt   Includes requirements that are not yet installed
       \u2514\u2500\u2500 config`),n("span",{class:"token punctuation"},"."),e(`json        Plugin configuration file
`)])])],-1),q=n("h3",{id:"development",tabindex:"-1"},[e("Development "),n("a",{class:"header-anchor",href:"#development","aria-hidden":"true"},"#")],-1),A=n("p",null,[e("After setting up the needed structure of the plugin, the code can be written in the "),n("strong",null,"init"),e(".py file. The most essential thing that is needed in this file is the load function.")],-1),E=n("div",{class:"info custom-block"},[n("p",{class:"custom-block-title"},"INFO"),n("p",null,"When then CTFd instance tries to load a plugin, it searches the for the load() function and executes it with itself load(app) as a parameter.")],-1),P=n("h4",{id:"adding-routes",tabindex:"-1"},[e("Adding routes "),n("a",{class:"header-anchor",href:"#adding-routes","aria-hidden":"true"},"#")],-1),I=n("p",null,"This section is also covered in the CTFd documentation.",-1),D=n("div",{class:"language-py"},[n("pre",null,[n("code",null,[n("span",{class:"token keyword"},"from"),e(" flask "),n("span",{class:"token keyword"},"import"),e(` render_template

`),n("span",{class:"token keyword"},"def"),e(),n("span",{class:"token function"},"load"),n("span",{class:"token punctuation"},"("),e("app"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},":"),e(`
    `),n("span",{class:"token decorator annotation punctuation"},[e("@app"),n("span",{class:"token punctuation"},"."),e("route")]),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'/newPlugin'"),n("span",{class:"token punctuation"},","),e(" methods"),n("span",{class:"token operator"},"="),n("span",{class:"token punctuation"},"["),n("span",{class:"token string"},"'GET'"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),e(`
    
`)])])],-1),M=n("h4",{id:"adding-database-tables",tabindex:"-1"},[e("Adding database tables "),n("a",{class:"header-anchor",href:"#adding-database-tables","aria-hidden":"true"},"#")],-1),S=n("div",{class:"language-py"},[n("pre",null,[n("code",null,[n("span",{class:"token keyword"},"from"),e(" CTFd"),n("span",{class:"token punctuation"},"."),e("models "),n("span",{class:"token keyword"},"import"),e(` db

`),n("span",{class:"token keyword"},"class"),e(),n("span",{class:"token class-name"},"Avatars"),n("span",{class:"token punctuation"},"("),e("db"),n("span",{class:"token punctuation"},"."),e("Model"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},":"),e(`
    `),n("span",{class:"token builtin"},"id"),e(),n("span",{class:"token operator"},"="),e(" db"),n("span",{class:"token punctuation"},"."),e("Column"),n("span",{class:"token punctuation"},"("),e(`
        db`),n("span",{class:"token punctuation"},"."),e("Integer"),n("span",{class:"token punctuation"},","),e(`
        db`),n("span",{class:"token punctuation"},"."),e("ForeignKey"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"challenges.id"'),n("span",{class:"token punctuation"},","),e(" ondelete"),n("span",{class:"token operator"},"="),n("span",{class:"token string"},'"CASCADE"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),e(`
        primary_key`),n("span",{class:"token operator"},"="),n("span",{class:"token boolean"},"True"),e(`
    `),n("span",{class:"token punctuation"},")"),e(`

    `),n("span",{class:"token keyword"},"def"),e(),n("span",{class:"token function"},"__init__"),n("span",{class:"token punctuation"},"("),e("self"),n("span",{class:"token punctuation"},","),e(),n("span",{class:"token operator"},"*"),e("args"),n("span",{class:"token punctuation"},","),e(),n("span",{class:"token operator"},"**"),e("kwargs"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},":"),e(`
        `),n("span",{class:"token builtin"},"super"),n("span",{class:"token punctuation"},"("),e("QuizChallengeModel"),n("span",{class:"token punctuation"},","),e(" self"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),e("__init__"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"**"),e("kwargs"),n("span",{class:"token punctuation"},")"),e(`


`),n("span",{class:"token keyword"},"def"),e(),n("span",{class:"token function"},"load"),n("span",{class:"token punctuation"},"("),e("app"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},":"),e(`
    app`),n("span",{class:"token punctuation"},"."),e("db"),n("span",{class:"token punctuation"},"."),e("create_all"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),e(`
    CHALLENGE_CLASSES`),n("span",{class:"token punctuation"},"["),n("span",{class:"token string"},'"quiz"'),n("span",{class:"token punctuation"},"]"),e(),n("span",{class:"token operator"},"="),e(` QuizChallenge
    register_plugin_assets_directory`),n("span",{class:"token punctuation"},"("),e(`
        app`),n("span",{class:"token punctuation"},","),e(`
        base_path`),n("span",{class:"token operator"},"="),n("span",{class:"token string"},'"/plugins/quiz_challenges/assets/"'),e(`
    `),n("span",{class:"token punctuation"},")"),e(`
    
`)])])],-1),j=[l,u,p,c,r,d,h,g,k,_,f,m,b,v,y,w,T,C,x,F,q,A,E,P,I,D,M,S];function H(z,G,N,$,B,L){return a(),s("div",null,j)}var R=t(i,[["render",H]]);export{Q as __pageData,R as default};
