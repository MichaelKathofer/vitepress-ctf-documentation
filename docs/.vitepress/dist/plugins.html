<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Plugins | CTF Report Documentation </title>
    <meta name="description" content="A VitePress site">
    <link rel="stylesheet" href="/assets/style.cac40d77.css">
    <link rel="modulepreload" href="/assets/Home.053bf7d9.js">
    <link rel="modulepreload" href="/assets/app.6aa4d79c.js">
    <link rel="modulepreload" href="/assets/plugins.md.c3120b48.lean.js">
    <link rel="modulepreload" href="/assets/app.6aa4d79c.js">
    <meta name="twitter:title" content="Plugins | CTF Report Documentation ">
    <meta property="og:title" content="Plugins | CTF Report Documentation ">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme"><header class="nav-bar" data-v-675d8756><div class="sidebar-button" data-v-675d8756><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="/" aria-label="CTF Report Documentation , back to home" data-v-675d8756 data-v-4a583abe><!----> CTF Report Documentation </a><div class="flex-grow" data-v-675d8756></div><div class="nav" data-v-675d8756><nav class="nav-links" data-v-675d8756 data-v-eab3edfe><!--[--><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/" data-v-b8818f8c>Home <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/setup" data-v-b8818f8c>Set up <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/aboutMe" data-v-b8818f8c>About <!----></a></div></div><!--]--><!----><!----></nav></div><!--[--><!--]--></header><aside class="sidebar" data-v-83e92a68><nav class="nav-links nav" data-v-83e92a68 data-v-eab3edfe><!--[--><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/" data-v-b8818f8c>Home <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/setup" data-v-b8818f8c>Set up <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/aboutMe" data-v-b8818f8c>About <!----></a></div></div><!--]--><!----><!----></nav><!--[--><!--]--><ul class="sidebar-links" data-v-83e92a68><!--[--><li class="sidebar-link"><a class="sidebar-link-item" href="/">Introduction</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/research">Research</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/proofOfConcept">Proof of Concept</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/ctfdframework">CTFd Framework</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item active" href="/plugins">Plugins Overview</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#_1-use-an-already-existing-plugin">1) use an already existing plugin</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#multiple-choice-plugin">Multiple choice plugin</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#timer-plugin">Timer plugin</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#_2-developing-a-new-plugin">2) developing a new plugin</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#structure">Structure</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#development">Development</a><!----></li></ul></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="/timerPlugin">Timer Plugin</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/multiplePlugin">Multiple Choice Plugin</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/userGroupPlugin">User Group Plugin</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/theme">Theme</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/roadmap">Roadmap</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/tutorial">Tutorial Content</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/errors">Common Errors</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/outlook">Outlook</a><!----></li><!--]--></ul><!--[--><!--]--></aside><!-- TODO: make this button accessible --><div class="sidebar-mask"></div><main class="page" data-v-7eddb2c4><div class="container" data-v-7eddb2c4><!--[--><!--]--><div style="position:relative;" class="content" data-v-7eddb2c4><div><p><img src="/PluginsOverview_banner.png" alt="An image"></p><h1 id="plugins" tabindex="-1">Plugins <a class="header-anchor" href="#plugins" aria-hidden="true">#</a></h1><p>Plugins can extend the feature set of the basic CTFd framework. If functions that you plan on using aren&#39;t built-in, there are two options:</p><h2 id="_1-use-an-already-existing-plugin" tabindex="-1">1) use an already existing plugin <a class="header-anchor" href="#_1-use-an-already-existing-plugin" aria-hidden="true">#</a></h2><p>There are two main places to look for Plugins. The official CTFd page sells a few ones and then there is the option to look into the GitHub community section. There are a few plugins openly available on GitHub, and some are only available as paid versions. Here is an overview of all the plugins that are available for CTFd in the community repo: <a href="https://github.com/CTFd/plugins" target="_blank" rel="noopener noreferrer">https://github.com/CTFd/plugins</a></p><p>The key is to widely cover the needed Todos with plugins that already exist before we start covering the rest with custom plugins. The first aspect that is already covered within a community plugin is a multiple question plugin</p><h3 id="multiple-choice-plugin" tabindex="-1">Multiple choice plugin <a class="header-anchor" href="#multiple-choice-plugin" aria-hidden="true">#</a></h3><p>credits: <a href="https://github.com/tamuctf/CTFd-multi-question-plugin" target="_blank" rel="noopener noreferrer">https://github.com/tamuctf/CTFd-multi-question-plugin</a></p><p>The installation process should be simple: Just clone the repository into the /plugins folder</p><div class="danger custom-block"><p class="custom-block-title">Error</p><p>File &quot;/opt/CTFd/CTFd/plugins/CTFd-multi-question-plugin/<strong>init</strong>.py&quot;, line 1 from CTFd.plugins import register_plugin_assets_directory, challenges, keys ImportError: cannot import name &#39;keys&#39; from &#39;CTFd.plugins&#39; &quot;(/opt/CTFd/CTFd/plugins/<strong>init</strong>.py)&quot;</p></div><ul><li><p>Tried to update the plugin to fix compatibility issues with the current CTFd version.</p></li><li><p>Error displays that it can&#39;t import &#39;keys&#39;. It shows, that newer versions use &#39;get_flag_class&#39; instead of &#39;get_key_class&#39;. Couldn&#39;t fix the issue after hours.</p></li></ul><h4 id="proposed-solution" tabindex="-1">Proposed solution <a class="header-anchor" href="#proposed-solution" aria-hidden="true">#</a></h4><p>Due to an update of CTFd to a newer version, variables and structure changed. Therefore, the plugin is no longer working at the newest version of CTFd and all try to quick-fix the plugin failed.</p><h3 id="timer-plugin" tabindex="-1">Timer plugin <a class="header-anchor" href="#timer-plugin" aria-hidden="true">#</a></h3><p>credits: <a href="https://github.com/alokmenghrajani/ctfd-timed-releases-plugin/tree/b5577c1a2e6b801d394d23dda808abbd68b46a7e" target="_blank" rel="noopener noreferrer">https://github.com/alokmenghrajani/ctfd-timed-releases-plugin/tree/b5577c1a2e6b801d394d23dda808abbd68b46a7e</a></p><p>This is the closest to a time-limited question plugin there is after research. This leads to developing an own solution due to the additional error, this plugin throws due to compatibility issues. After researching more this was an occurring error and left us with the only option to develop our solutions for the requested features</p><h2 id="_2-developing-a-new-plugin" tabindex="-1">2) developing a new plugin <a class="header-anchor" href="#_2-developing-a-new-plugin" aria-hidden="true">#</a></h2><p>This section covers the documentation on How-to develop a plugin for CTFd. Due to the lack of in-depth documentation, this process was quite a challenge. In this section, I will try to cover how to start programming a plugin</p><h3 id="structure" tabindex="-1">Structure <a class="header-anchor" href="#structure" aria-hidden="true">#</a></h3><div class="language-js"><pre><code>CTFd
└── plugins
   └── CTFd<span class="token operator">-</span>plugin
       ├── <span class="token constant">README</span><span class="token punctuation">.</span>md          Classic ReadMe files <span class="token keyword">with</span> basic setup instructions
       ├── __init__<span class="token punctuation">.</span>py        Main code
       ├── requirements<span class="token punctuation">.</span>txt   Includes requirements that are not yet installed
       └── config<span class="token punctuation">.</span>json        Plugin configuration file
</code></pre></div><h3 id="development" tabindex="-1">Development <a class="header-anchor" href="#development" aria-hidden="true">#</a></h3><p>After setting up the needed structure of the plugin, the code can be written in the <strong>init</strong>.py file. The most essential thing that is needed in this file is the load function.</p><div class="info custom-block"><p class="custom-block-title">INFO</p><p>When then CTFd instance tries to load a plugin, it searches the for the load() function and executes it with itself load(app) as a parameter.</p></div><h4 id="adding-routes" tabindex="-1">Adding routes <a class="header-anchor" href="#adding-routes" aria-hidden="true">#</a></h4><p>This section is also covered in the CTFd documentation.</p><div class="language-py"><pre><code><span class="token keyword">from</span> flask <span class="token keyword">import</span> render_template

<span class="token keyword">def</span> <span class="token function">load</span><span class="token punctuation">(</span>app<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token decorator annotation punctuation">@app<span class="token punctuation">.</span>route</span><span class="token punctuation">(</span><span class="token string">&#39;/newPlugin&#39;</span><span class="token punctuation">,</span> methods<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">&#39;GET&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    
</code></pre></div><h4 id="adding-database-tables" tabindex="-1">Adding database tables <a class="header-anchor" href="#adding-database-tables" aria-hidden="true">#</a></h4><div class="language-py"><pre><code><span class="token keyword">from</span> CTFd<span class="token punctuation">.</span>models <span class="token keyword">import</span> db

<span class="token keyword">class</span> <span class="token class-name">Avatars</span><span class="token punctuation">(</span>db<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token builtin">id</span> <span class="token operator">=</span> db<span class="token punctuation">.</span>Column<span class="token punctuation">(</span>
        db<span class="token punctuation">.</span>Integer<span class="token punctuation">,</span>
        db<span class="token punctuation">.</span>ForeignKey<span class="token punctuation">(</span><span class="token string">&quot;challenges.id&quot;</span><span class="token punctuation">,</span> ondelete<span class="token operator">=</span><span class="token string">&quot;CASCADE&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        primary_key<span class="token operator">=</span><span class="token boolean">True</span>
    <span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token builtin">super</span><span class="token punctuation">(</span>QuizChallengeModel<span class="token punctuation">,</span> self<span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token operator">**</span>kwargs<span class="token punctuation">)</span>


<span class="token keyword">def</span> <span class="token function">load</span><span class="token punctuation">(</span>app<span class="token punctuation">)</span><span class="token punctuation">:</span>
    app<span class="token punctuation">.</span>db<span class="token punctuation">.</span>create_all<span class="token punctuation">(</span><span class="token punctuation">)</span>
    CHALLENGE_CLASSES<span class="token punctuation">[</span><span class="token string">&quot;quiz&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> QuizChallenge
    register_plugin_assets_directory<span class="token punctuation">(</span>
        app<span class="token punctuation">,</span>
        base_path<span class="token operator">=</span><span class="token string">&quot;/plugins/quiz_challenges/assets/&quot;</span>
    <span class="token punctuation">)</span>
    
</code></pre></div></div></div><footer class="page-footer" data-v-7eddb2c4 data-v-fb8d84c6><div class="edit" data-v-fb8d84c6><div class="edit-link" data-v-fb8d84c6 data-v-1ed99556><!----></div></div><div class="updated" data-v-fb8d84c6><!----></div></footer><div class="next-and-prev-link" data-v-7eddb2c4 data-v-38ede35f><div class="container" data-v-38ede35f><div class="prev" data-v-38ede35f><a class="link" href="/ctfdframework" data-v-38ede35f><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-prev" data-v-38ede35f><path d="M19,11H7.4l5.3-5.3c0.4-0.4,0.4-1,0-1.4s-1-0.4-1.4,0l-7,7c-0.1,0.1-0.2,0.2-0.2,0.3c-0.1,0.2-0.1,0.5,0,0.8c0.1,0.1,0.1,0.2,0.2,0.3l7,7c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3c0.4-0.4,0.4-1,0-1.4L7.4,13H19c0.6,0,1-0.4,1-1S19.6,11,19,11z"></path></svg><span class="text" data-v-38ede35f>CTFd Framework</span></a></div><div class="next" data-v-38ede35f><a class="link" href="/timerPlugin" data-v-38ede35f><span class="text" data-v-38ede35f>Timer Plugin</span><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-next" data-v-38ede35f><path d="M19.9,12.4c0.1-0.2,0.1-0.5,0-0.8c-0.1-0.1-0.1-0.2-0.2-0.3l-7-7c-0.4-0.4-1-0.4-1.4,0s-0.4,1,0,1.4l5.3,5.3H5c-0.6,0-1,0.4-1,1s0.4,1,1,1h11.6l-5.3,5.3c-0.4,0.4-0.4,1,0,1.4c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3l7-7C19.8,12.6,19.9,12.5,19.9,12.4z"></path></svg></a></div></div></div><!--[--><!--]--></div></main></div><!----><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"aboutme.md\":\"41b49f83\",\"ctfdframework.md\":\"3e621198\",\"errors.md\":\"540eb7c9\",\"index.md\":\"a7b44429\",\"multipleplugin.md\":\"786794b8\",\"outlook.md\":\"2edb5b99\",\"plugins.md\":\"c3120b48\",\"proofofconcept.md\":\"26af8b7c\",\"research.md\":\"45ccbd41\",\"roadmap.md\":\"a45a4db7\",\"setup.md\":\"5bf59cb8\",\"theme.md\":\"1714557c\",\"timerplugin.md\":\"d9a1f39b\",\"tutorial.md\":\"c1bbd4f6\",\"usergroupplugin.md\":\"2f81b72b\"}")</script>
    <script type="module" async src="/assets/app.6aa4d79c.js"></script>
    
  </body>
</html>