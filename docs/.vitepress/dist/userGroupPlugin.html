<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>User Group Plugin | CTF Report Documentation </title>
    <meta name="description" content="A VitePress site">
    <link rel="stylesheet" href="/assets/style.cac40d77.css">
    <link rel="modulepreload" href="/assets/Home.053bf7d9.js">
    <link rel="modulepreload" href="/assets/app.6aa4d79c.js">
    <link rel="modulepreload" href="/assets/userGroupPlugin.md.2f81b72b.lean.js">
    <link rel="modulepreload" href="/assets/app.6aa4d79c.js">
    <meta name="twitter:title" content="User Group Plugin | CTF Report Documentation ">
    <meta property="og:title" content="User Group Plugin | CTF Report Documentation ">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme"><header class="nav-bar" data-v-675d8756><div class="sidebar-button" data-v-675d8756><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="/" aria-label="CTF Report Documentation , back to home" data-v-675d8756 data-v-4a583abe><!----> CTF Report Documentation </a><div class="flex-grow" data-v-675d8756></div><div class="nav" data-v-675d8756><nav class="nav-links" data-v-675d8756 data-v-eab3edfe><!--[--><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/" data-v-b8818f8c>Home <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/setup" data-v-b8818f8c>Set up <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/aboutMe" data-v-b8818f8c>About <!----></a></div></div><!--]--><!----><!----></nav></div><!--[--><!--]--></header><aside class="sidebar" data-v-83e92a68><nav class="nav-links nav" data-v-83e92a68 data-v-eab3edfe><!--[--><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/" data-v-b8818f8c>Home <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/setup" data-v-b8818f8c>Set up <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/aboutMe" data-v-b8818f8c>About <!----></a></div></div><!--]--><!----><!----></nav><!--[--><!--]--><ul class="sidebar-links" data-v-83e92a68><!--[--><li class="sidebar-link"><a class="sidebar-link-item" href="/">Introduction</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/research">Research</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/proofOfConcept">Proof of Concept</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/ctfdframework">CTFd Framework</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/plugins">Plugins Overview</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/timerPlugin">Timer Plugin</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/multiplePlugin">Multiple Choice Plugin</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item active" href="/userGroupPlugin">User Group Plugin</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#issue">Issue:</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="/theme">Theme</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/roadmap">Roadmap</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/tutorial">Tutorial Content</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/errors">Common Errors</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/outlook">Outlook</a><!----></li><!--]--></ul><!--[--><!--]--></aside><!-- TODO: make this button accessible --><div class="sidebar-mask"></div><main class="page" data-v-7eddb2c4><div class="container" data-v-7eddb2c4><!--[--><!--]--><div style="position:relative;" class="content" data-v-7eddb2c4><div><p><img src="/UserGroupPlugin_banner.png" alt="An image"></p><h1 id="user-group-plugin" tabindex="-1">User Group Plugin <a class="header-anchor" href="#user-group-plugin" aria-hidden="true">#</a></h1><p>The CTFd platform has built-in USER and TEAM modes. The drawback of the integrated Team mode is, that once one person of the team completes a challenge, all team members get credit. When talking about classrooms, a Team that would resemble a class would all get credited when the first person finishes it, which is not beneficial. Therefore, my proposed solution was to use the Affiliation field in the database, which has no specific usage and utilise it as the classroom affiliation. On the other hand, there is the Admin User, which creates the challenges. The idea is to add a tag with &quot;class=ABCXYZ&quot;. Then in the CHallenges view, we search for the affiliation of the user in the tags of the challenges.</p><h2 id="issue" tabindex="-1">Issue: <a class="header-anchor" href="#issue" aria-hidden="true">#</a></h2><p>No matter where I tried to implement the logic in the challenges.js file, the inner logic of the CTFd seems to overwrite it and it simply never affects the placement of the challenges. For example in CTFd&gt;themes&gt;vives-theme&gt;assets&gt;js&gt;pages&gt;challenges.js:</p><div class="language-html"><pre><code>const loadChal = id =&gt; {
  const chal = $.grep(challenges, chal =&gt; chal.id == id)[0];
  // try to get user affiliation

  if (chal.type === &quot;hidden&quot;) {
    ezAlert({
      title: &quot;Challenge Hidden!&quot;,
      body: &quot;You haven&#39;t unlocked this challenge yet!&quot;,
      button: &quot;Got it!&quot;
    });
    return;
  }
  // new if condition to check if challange has any &#39;group&#39; tag
  if ((chal.tags.includes(&quot;group=&quot;))){
    displayChal(chal);
  }
};
</code></pre></div><p>I identified no way to affect the loading of the challenges. Even if we try to limit loading only with challenges with a group tag and not specifically searching for group affiliation, this isn&#39;t working. further manipulating the loadChals() function didn&#39;t result in a change.</p><div class="language-html"><pre><code>function loadChals() {
  return CTFd.api.get_challenge_list().then(function(response) {
    const categories = [];
    const $challenges_board = $(&quot;#challenges-board&quot;);
    challenges = response.data;

    if (window.BETA_sortChallenges) {
      challenges = window.BETA_sortChallenges(challenges);
    }

    $challenges_board.empty();

    for (let i = challenges.length - 1; i &gt;= 0; i--) {
      if ($.inArray(challenges[i].category, categories) == -1) {
        
        const category = challenges[i].category;
        categories.push(category);

        const categoryid = category.replace(/ /g, &quot;-&quot;).hashCode();
        const categoryrow = $(
          &quot;&quot; +
            &#39;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{0}-row<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pt-5<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>&#39;.format(categoryid) +
            &#39;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>category-header col-md-12 mb-3<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>&#39; +
            &quot;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>&quot; +
            &#39;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>category-challenges col-md-12<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>&#39; +
            &#39;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>challenges-row col-md-12<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>&#39; +
            &quot;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>&quot; +
            &quot;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>&quot;
        );
        categoryrow
          .find(&quot;.category-header&quot;)
          .append($(&quot;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span>&quot; + category + &quot;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span>&quot;));

        $challenges_board.append(categoryrow);
      }
    }

    for (let i = 0; i &lt;= challenges.length - 1; i++) {
      const chalinfo = challenges[i];
      const chalid = chalinfo.name.replace(/ /g, &quot;-&quot;).hashCode();
      const catid = chalinfo.category.replace(/ /g, &quot;-&quot;).hashCode();
      const chalwrap = $(
        &quot;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>{0}<span class="token punctuation">&#39;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>col-md-3 d-inline-block<span class="token punctuation">&#39;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>&quot;.format(chalid)
      );
      let chalbutton;

      if (solves.indexOf(chalinfo.id) == -1) {
        
        <span class="token comment">&lt;!-- Here is again happening a filtering through, if a challenge which fulfills
         th condition to be not solved, to habe a tag with group=&quot;&quot; --&gt;</span>
        
        if ((chal.tags.includes(&quot;group=&quot;))) {
            chalbutton = $(
            &quot;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>btn btn-dark challenge-button w-100 text-truncate pt-3 pb-3 mb-2<span class="token punctuation">&#39;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>{0}<span class="token punctuation">&#39;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>&quot;.format(
            chalinfo.id
            )
            );
        }
        
      } else {
        chalbutton = $(
          &quot;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>btn btn-dark challenge-button solved-challenge w-100 text-truncate pt-3 pb-3 mb-2<span class="token punctuation">&#39;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>{0}<span class="token punctuation">&#39;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>fas fa-check corner-button-check<span class="token punctuation">&#39;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>&quot;.format(
            chalinfo.id
          )
        );
      }

      const chalheader = $(&quot;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>{0}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>&quot;.format(chalinfo.name));
      const chalscore = $(&quot;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>{0}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>&quot;.format(chalinfo.value));
      for (let j = 0; j &lt; chalinfo.tags.length; j++) {
        const tag = &quot;tag-&quot; + chalinfo.tags[j].value.replace(/ /g, &quot;-&quot;);
        chalwrap.addClass(tag);
      }

      chalbutton.append(chalheader);
      chalbutton.append(chalscore);
      chalwrap.append(chalbutton);

      $(&quot;#&quot; + catid + &quot;-row&quot;)
        .find(&quot;.category-challenges &gt; .challenges-row&quot;)
        .append(chalwrap);
    }

    $(&quot;.challenge-button&quot;).click(function(_event) {
      loadChal(this.value);
    });
  });
}
</code></pre></div><p>With the lack of documentation on CTFd and having no resources, this issue took me almost two weeks to give up on. I tried so many combinations and different filtering methods using, that documenting would become repetitive and not beneficial. The steps repeated themselves a lot and the result remained the same: The idea to form user groups in the CTF Vives is not working after the 4 Months on the project.</p></div></div><footer class="page-footer" data-v-7eddb2c4 data-v-fb8d84c6><div class="edit" data-v-fb8d84c6><div class="edit-link" data-v-fb8d84c6 data-v-1ed99556><!----></div></div><div class="updated" data-v-fb8d84c6><!----></div></footer><div class="next-and-prev-link" data-v-7eddb2c4 data-v-38ede35f><div class="container" data-v-38ede35f><div class="prev" data-v-38ede35f><a class="link" href="/multiplePlugin" data-v-38ede35f><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-prev" data-v-38ede35f><path d="M19,11H7.4l5.3-5.3c0.4-0.4,0.4-1,0-1.4s-1-0.4-1.4,0l-7,7c-0.1,0.1-0.2,0.2-0.2,0.3c-0.1,0.2-0.1,0.5,0,0.8c0.1,0.1,0.1,0.2,0.2,0.3l7,7c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3c0.4-0.4,0.4-1,0-1.4L7.4,13H19c0.6,0,1-0.4,1-1S19.6,11,19,11z"></path></svg><span class="text" data-v-38ede35f>Multiple Choice Plugin</span></a></div><div class="next" data-v-38ede35f><a class="link" href="/theme" data-v-38ede35f><span class="text" data-v-38ede35f>Theme</span><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-next" data-v-38ede35f><path d="M19.9,12.4c0.1-0.2,0.1-0.5,0-0.8c-0.1-0.1-0.1-0.2-0.2-0.3l-7-7c-0.4-0.4-1-0.4-1.4,0s-0.4,1,0,1.4l5.3,5.3H5c-0.6,0-1,0.4-1,1s0.4,1,1,1h11.6l-5.3,5.3c-0.4,0.4-0.4,1,0,1.4c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3l7-7C19.8,12.6,19.9,12.5,19.9,12.4z"></path></svg></a></div></div></div><!--[--><!--]--></div></main></div><!----><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"aboutme.md\":\"41b49f83\",\"ctfdframework.md\":\"3e621198\",\"errors.md\":\"540eb7c9\",\"index.md\":\"a7b44429\",\"multipleplugin.md\":\"786794b8\",\"outlook.md\":\"2edb5b99\",\"plugins.md\":\"c3120b48\",\"proofofconcept.md\":\"26af8b7c\",\"research.md\":\"45ccbd41\",\"roadmap.md\":\"a45a4db7\",\"setup.md\":\"5bf59cb8\",\"theme.md\":\"1714557c\",\"timerplugin.md\":\"d9a1f39b\",\"tutorial.md\":\"c1bbd4f6\",\"usergroupplugin.md\":\"2f81b72b\"}")</script>
    <script type="module" async src="/assets/app.6aa4d79c.js"></script>
    
  </body>
</html>